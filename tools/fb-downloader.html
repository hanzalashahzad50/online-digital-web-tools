<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook Video Downloader - Multi-Tools Hub</title>
    <meta name="description" content="Download videos from Facebook in HD quality. Fast, free, and easy to use.">
    <link rel="icon" type="image/png" href="../favicon.ico">
    <!-- This must be in your <head> section -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1226609223843598" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .video-preview {
            background: #f8f9fa;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }
        .video-preview video {
            width: 100%;
            border-radius: 12px 12px 0 0;
        }
        .video-info {
            padding: 15px;
        }
        .video-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1c1e21;
        }
        .video-meta {
            font-size: 0.85rem;
            color: #65676b;
            margin-bottom: 15px;
        }
        .download-options {
            margin-top: 20px;
        }
        .download-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: #f0f2f5;
            border: 1px solid #dddfe2;
            transition: all 0.2s;
            text-decoration: none;
            color: #1c1e21;
        }
        .download-btn:hover {
            background: #e4e6eb;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .download-quality {
            font-weight: 600;
            color: #1c1e21;
        }
        .download-size {
            font-size: 0.8rem;
            color: #65676b;
        }
        .download-icon {
            color: #1877f2;
            font-size: 1.2rem;
        }
        .how-to-use {
            background: #f0f2f5;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }
        .how-to-use h4 {
            color: #1c1e21;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .how-to-use ol {
            padding-left: 20px;
            margin-bottom: 0;
        }
        .how-to-use li {
            margin-bottom: 10px;
            color: #4b4f56;
        }
        .how-to-use li:last-child {
            margin-bottom: 0;
        }
        .preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            background: #f0f2f5;
            border-radius: 12px;
            color: #65676b;
            text-align: center;
            padding: 30px;
        }
        .preview-placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #bcc0c4;
        }
        .form-control:focus, .form-select:focus {
            border-color: #1877f2;
            box-shadow: 0 0 0 0.25rem rgba(24, 119, 242, 0.25);
        }
        .btn-primary {
            background: #1877f2;
            border-color: #1877f2;
        }
        .btn-primary:hover {
            background: #166fe5;
            border-color: #166fe5;
        }
        .ad-banner {
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e9ecef;
        }
        .ad-banner ins {
            display: block;
            width: 100%;
            height: 100%;
            min-height: 90px;
        }
    </style>
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <div class="container py-3">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <h1 class="text-center mb-3">
                    <i class="fab fa-facebook text-primary me-2"></i>Facebook Video Downloader
                </h1>
                <p class="text-center text-muted mb-4">Download videos from Facebook in HD quality. Fast, free, and easy to use.</p>
                
                <!-- Top Ad Banner -->
                <div class="text-center mb-4">
                    <div class="ad-banner border rounded p-2 bg-light">
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-pub-1226609223843598"
                             data-ad-slot="1798180633"
                             data-ad-format="auto"
                             data-full-width-responsive="true">
                        </ins>
                        <script>
                             (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    <small class="text-muted d-block mt-1">Advertisement</small>
                </div>
                
                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <form id="downloadForm">
                            <div class="mb-3">
                                <label for="videoUrl" class="form-label">Facebook Video URL</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fab fa-facebook"></i></span>
                                    <input type="url" class="form-control" id="videoUrl" 
                                           placeholder="Paste Facebook video URL here (e.g., https://www.facebook.com/username/videos/1234567890)" required>
                                    <button class="btn btn-primary" type="submit" id="fetchBtn">
                                        <i class="fas fa-search me-1"></i> Fetch Video
                                    </button>
                                </div>
                                <div class="form-text">Works with public Facebook videos, reels, and stories</div>
                            </div>
                        </form>
                        
                        <div id="loadingSpinner" class="text-center py-4" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2 mb-0">Fetching video information...</p>
                        </div>
                        
                        <div id="errorMessage" class="alert alert-danger d-none" role="alert">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <span id="errorText">An error occurred while fetching the video. Please check the URL and try again.</span>
                        </div>
                        
                        <div id="videoPreview" class="d-none">
                            <h5 class="mb-3">Video Preview</h5>
                            <div class="video-preview">
                                <video id="videoPlayer" controls>
                                    <source src="" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <div class="video-info">
                                    <div class="video-title" id="videoTitle">Video Title</div>
                                    <div class="video-meta">
                                        <span id="videoDuration">00:00</span> • 
                                        <span id="videoUploadDate">Just now</span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <img src="https://via.placeholder.com/32" alt="User" class="rounded-circle me-2" id="userAvatar" style="width: 32px; height: 32px; object-fit: cover;">
                                        <div>
                                            <div class="fw-medium" id="userName">User Name</div>
                                            <div class="text-muted small" id="userInfo">@username</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="download-options">
                                <h5 class="mb-3">Download Options</h5>
                                <div id="qualityOptions">
                                    <!-- Quality options will be added here dynamically -->
                                    <div class="text-center py-4">
                                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="mt-2 mb-0">Loading download options...</p>
                                    </div>
                                </div>
                            </div>
                            
                           
                            
                            <div class="how-to-use">
                                <h4><i class="fas fa-question-circle me-2"></i>How to Download Facebook Videos</h4>
                                <ol>
                                    <li>Find the video you want to download on Facebook</li>
                                    <li>Click on the three dots (•••) below the video</li>
                                    <li>Select "Copy link" or "Copy video URL"</li>
                                    <li>Paste the URL in the input field above</li>
                                    <li>Click "Fetch Video" and choose your preferred quality</li>
                                </ol>
                            </div>
                        </div>
                        
                        <div id="initialState" class="preview-placeholder">
                            <i class="fab fa-facebook"></i>
                            <h4>Paste a Facebook Video URL</h4>
                            <p class="mb-0">Enter a Facebook video URL above to get started</p>
                        </div>
                    </div>
                </div>
                
                <!-- Bottom Ad Banner -->
                <div class="text-center my-4">
                    <div class="ad-banner border rounded p-2 bg-light">
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-pub-1226609223843598"
                             data-ad-slot="1798180633"
                             data-ad-format="auto"
                             data-full-width-responsive="true">
                        </ins>
                        <script>
                             (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    <small class="text-muted d-block mt-1">Advertisement</small>
                </div>
                
                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-info-circle me-2"></i>About Facebook Video Downloader</h5>
                        <p>Our Facebook Video Downloader allows you to save videos from Facebook to your device quickly and easily. Whether it's a funny clip, an important news segment, or a memorable moment, you can download it in high quality with just a few clicks.</p>
                        
                        <h6 class="mt-4">Features:</h6>
                        <ul>
                            <li>Download videos in HD quality</li>
                            <li>Multiple quality options</li>
                            <li>Fast and secure downloads</li>
                            <li>No registration required</li>
                            <li>Works on all devices</li>
                        </ul>
                        
                        <div class="alert alert-warning mt-3">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Disclaimer:</strong> Please respect copyright and only download videos that you have permission to use. This tool is for personal use only.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>
    
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="../js/header-footer.js"></script>
    <script src="../js/ads.js"></script>
    <script>
        // Ensure header and footer are loaded even if the script is loaded after DOMContentLoaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                if (typeof loadHeader === 'function') loadHeader();
                if (typeof loadFooter === 'function') loadFooter();
            });
        } else {
            if (typeof loadHeader === 'function') loadHeader();
            if (typeof loadFooter === 'function') loadFooter();
        }
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('downloadForm');
            const videoUrlInput = document.getElementById('videoUrl');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const errorMessage = document.getElementById('errorMessage');
            const videoPreview = document.getElementById('videoPreview');
            const initialState = document.getElementById('initialState');
            const qualityOptions = document.getElementById('qualityOptions');
            const videoPlayer = document.getElementById('videoPlayer');
            
            // Handle form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const videoUrl = videoUrlInput.value.trim();
                
                if (!isValidFacebookUrl(videoUrl)) {
                    showError('Please enter a valid Facebook video URL');
                    return;
                }
                
                // Show loading state
                loadingSpinner.style.display = 'block';
                errorMessage.classList.add('d-none');
                videoPreview.classList.add('d-none');
                initialState.classList.add('d-none');
                
                // In a real implementation, you would make an API call to fetch video info
                // For this example, we'll simulate a delay and show sample data
                setTimeout(() => {
                    try {
                        const videoData = getSampleVideoData(videoUrl);
                        displayVideoInfo(videoData);
                        displayQualityOptions(videoData.qualities);
                        
                        // Show video preview
                        videoPreview.classList.remove('d-none');
                        loadingSpinner.style.display = 'none';
                    } catch (error) {
                        console.error('Error fetching video:', error);
                        showError('Failed to fetch video. ' + error.message);
                        loadingSpinner.style.display = 'none';
                        initialState.classList.remove('d-none');
                    }
                }, 1500);
            });
            
            // Validate Facebook URL
            function isValidFacebookUrl(url) {
                const facebookRegex = /(?:https?:\/\/)?(?:www\.)?(?:facebook\.com|fb\.watch|fb\.com)\/([^\/]+\/videos\/|video\.php\?v=|watch\/?\?v=|share\/r\/|\?v=|\/videos\/|\/video\/)([0-9]+|[^\/]+\/\d+\/|\d+\/\d+\/\d+\/|\?v=\d+)/i;
                return facebookRegex.test(url);
            }
            
            // Show error message
            function showError(message) {
                errorMessage.classList.remove('d-none');
                document.getElementById('errorText').textContent = message;
                loadingSpinner.style.display = 'none';
            }
            
            // Display video information
            function displayVideoInfo(videoData) {
                document.getElementById('videoTitle').textContent = videoData.title;
                document.getElementById('videoDuration').textContent = formatDuration(videoData.duration);
                document.getElementById('videoUploadDate').textContent = formatDate(videoData.uploadDate);
                document.getElementById('userName').textContent = videoData.user.name;
                document.getElementById('userInfo').textContent = `@${videoData.user.username}`;
                document.getElementById('userAvatar').src = videoData.user.avatar;
                
                // Set video source
                videoPlayer.src = videoData.qualities[0].url; // Use highest quality for preview
                videoPlayer.load();
            }
            
            // Display quality options
            function displayQualityOptions(qualities) {
                qualityOptions.innerHTML = '';
                
                qualities.forEach(quality => {
                    const option = document.createElement('a');
                    option.href = '#';
                    option.className = 'download-btn';
                    option.innerHTML = `
                        <div>
                            <div class="download-quality">${quality.quality}</div>
                            <div class="download-size">${formatFileSize(quality.size)} • ${quality.format.toUpperCase()}</div>
                        </div>
                        <i class="fas fa-download download-icon"></i>
                    `;
                    
                    option.addEventListener('click', function(e) {
                        e.preventDefault();
                        // In a real implementation, this would trigger the download
                        window.open(quality.url, '_blank');
                    });
                    
                    qualityOptions.appendChild(option);
                });
            }
            
            // Format duration (seconds to MM:SS)
            function formatDuration(seconds) {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = Math.floor(seconds % 60);
                return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
            }
            
            // Format file size (bytes to KB/MB)
            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' B';
                const kb = bytes / 1024;
                if (kb < 1024) return kb.toFixed(1) + ' KB';
                return (kb / 1024).toFixed(1) + ' MB';
            }
            
            // Format date
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'short', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('en-US', options);
            }
            
            // Sample video data for demonstration
            function getSampleVideoData(url) {
                const videoId = extractVideoId(url);
                const now = new Date();
                const uploadDate = new Date(now - Math.floor(Math.random() * 30) * 24 * 60 * 60 * 1000);
                
                return {
                    id: videoId || '1234567890',
                    title: 'Sample Facebook Video',
                    description: 'This is a sample video description that shows how the Facebook Video Downloader works.',
                    duration: 123, // seconds
                    uploadDate: uploadDate.toISOString(),
                    views: Math.floor(Math.random() * 1000000) + 1000,
                    likes: Math.floor(Math.random() * 50000) + 1000,
                    comments: Math.floor(Math.random() * 5000) + 100,
                    shares: Math.floor(Math.random() * 10000) + 100,
                    user: {
                        id: 'user123',
                        name: 'Sample User',
                        username: 'sample.user',
                        avatar: 'https://i.pravatar.cc/150?img=' + Math.floor(Math.random() * 70) + 1
                    },
                    qualities: [
                        {
                            quality: 'HD 1080p',
                            format: 'mp4',
                            url: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4',
                            size: 1024 * 1024 * 8.2 // 8.2 MB
                        },
                        {
                            quality: 'HD 720p',
                            format: 'mp4',
                            url: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4',
                            size: 1024 * 1024 * 4.5 // 4.5 MB
                        },
                        {
                            quality: 'SD 480p',
                            format: 'mp4',
                            url: 'https://sample-videos.com/video123/mp4/480/big_buck_bunny_480p_1mb.mp4',
                            size: 1024 * 1024 * 2.1 // 2.1 MB
                        },
                        {
                            quality: 'SD 360p',
                            format: 'mp4',
                            url: 'https://sample-videos.com/video123/mp4/360/big_buck_bunny_360p_1mb.mp4',
                            size: 1024 * 1024 * 1.2 // 1.2 MB
                        }
                    ]
                };
            }
            
            // Extract video ID from URL
            function extractVideoId(url) {
                const matches = url.match(/(?:v=|v\/|\/videos\/|\/video\/|\/)([0-9]+)/i);
                return matches ? matches[1] : null;
            }
            
            // Load header and footer
            loadHeader();
            loadFooter();
        });
    </script>
</body>
</html>
