<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Formatter - Multi-Tools Hub</title>
    <meta name="description" content="Free online JSON formatter and validator. Format, validate, and beautify JSON data with syntax highlighting.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <!-- This must be in your <head> section -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1226609223843598" crossorigin="anonymous"></script>
    <link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS7GlcAeh77bR29ViliFsnRN3qtfdwekxAsSQ&s" type="image/x-icon">

    <style>
        .json-editor {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            min-height: 300px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .json-editor:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        .syntax-error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .syntax-valid {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
    </style>
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header-placeholder"></div>

    <!-- Tool Container -->
    <div class="container tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-code me-3"></i>JSON Formatter</h1>
            <p class="lead">Format, validate, and beautify JSON data with syntax highlighting</p>
        </div>

        <div class="tool-content">
            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-edit me-2"></i>Input JSON</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="jsonInput" class="form-label">Enter or paste your JSON:</label>
                                <div id="jsonInput" class="json-editor" contenteditable="true" placeholder="Paste your JSON here..."></div>
                            </div>
                            
                            <div class="d-flex gap-2 mb-3">
                                <button id="formatBtn" class="btn btn-primary">
                                    <i class="fas fa-magic me-2"></i>Format JSON
                                </button>
                                <button id="minifyBtn" class="btn btn-outline-secondary">
                                    <i class="fas fa-compress-alt me-2"></i>Minify
                                </button>
                                <button id="validateBtn" class="btn btn-outline-info">
                                    <i class="fas fa-check-circle me-2"></i>Validate
                                </button>
                                <button id="clearBtn" class="btn btn-outline-danger">
                                    <i class="fas fa-trash me-2"></i>Clear
                                </button>
                            </div>

                            <div id="validationResult" class="alert d-none">
                                <!-- Validation messages will appear here -->
                            </div>
                        </div>
                    </div>

                    <!-- Sample JSON -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-lightbulb me-2"></i>Sample JSON</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary btn-sm" onclick="loadSample('user')">
                                    User Object
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="loadSample('array')">
                                    Array of Objects
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="loadSample('nested')">
                                    Nested Objects
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="loadSample('complex')">
                                    Complex Structure
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-eye me-2"></i>Formatted Output</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="jsonOutput" class="form-label">Formatted JSON:</label>
                                <div id="jsonOutput" class="json-editor" style="background-color: #fff;"></div>
                            </div>
                            
                            <div class="d-flex gap-2">
                                <button id="copyBtn" class="btn btn-success">
                                    <i class="fas fa-copy me-2"></i>Copy Formatted
                                </button>
                                <button id="downloadBtn" class="btn btn-outline-primary">
                                    <i class="fas fa-download me-2"></i>Download
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- JSON Statistics -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>JSON Statistics</h5>
                        </div>
                        <div class="card-body">
                            <div class="row text-center">
                                <div class="col-4 mb-3">
                                    <div class="stat-item">
                                        <h4 id="objectCount" class="text-primary">0</h4>
                                        <small class="text-muted">Objects</small>
                                    </div>
                                </div>
                                <div class="col-4 mb-3">
                                    <div class="stat-item">
                                        <h4 id="arrayCount" class="text-success">0</h4>
                                        <small class="text-muted">Arrays</small>
                                    </div>
                                </div>
                                <div class="col-4 mb-3">
                                    <div class="stat-item">
                                        <h4 id="propertyCount" class="text-info">0</h4>
                                        <small class="text-muted">Properties</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ad Section -->
                     <div class="text-center mb-3 bottom-ad mt-4">
                    <div class="ad-banner border rounded p-2 bg-light">
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-pub-1226609223843598"
                             data-ad-slot="1798180633"
                             data-ad-format="auto"
                             data-full-width-responsive="true">
                        </ins>
                        <script>
                             (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                    <small class="text-muted d-block mt-1">Advertisement</small>
                </div>

                </div>
            </div>

            <!-- JSON Tree Viewer -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-sitemap me-2"></i>JSON Tree Structure</h5>
                        </div>
                        <div class="card-body">
                            <div id="jsonTree" class="json-tree">
                                <div class="text-center text-muted">
                                    <i class="fas fa-tree fa-3x mb-3"></i>
                                    <p>Format JSON to view tree structure</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer will be loaded dynamically -->
    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/main.js"></script>
    <script>
        // JSON Formatter specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            const jsonInput = document.getElementById('jsonInput');
            const jsonOutput = document.getElementById('jsonOutput');
            const formatBtn = document.getElementById('formatBtn');
            const minifyBtn = document.getElementById('minifyBtn');
            const validateBtn = document.getElementById('validateBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const validationResult = document.getElementById('validationResult');
            const jsonTree = document.getElementById('jsonTree');

            // Statistics elements
            const objectCount = document.getElementById('objectCount');
            const arrayCount = document.getElementById('arrayCount');
            const propertyCount = document.getElementById('propertyCount');

            // Format JSON
            formatBtn.addEventListener('click', function() {
                const input = jsonInput.textContent.trim();
                if (!input) {
                    MultiTools.showNotification('Please enter JSON data', 'warning');
                    return;
                }

                try {
                    const parsed = JSON.parse(input);
                    const formatted = JSON.stringify(parsed, null, 2);
                    jsonOutput.textContent = formatted;
                    jsonOutput.className = 'json-editor syntax-valid';
                    jsonInput.className = 'json-editor syntax-valid';
                    updateStatistics(parsed);
                    generateTreeView(parsed);
                    hideValidationResult();
                } catch (error) {
                    showValidationError(error.message);
                    jsonInput.className = 'json-editor syntax-error';
                }
            });

            // Minify JSON
            minifyBtn.addEventListener('click', function() {
                const input = jsonInput.textContent.trim();
                if (!input) {
                    MultiTools.showNotification('Please enter JSON data', 'warning');
                    return;
                }

                try {
                    const parsed = JSON.parse(input);
                    const minified = JSON.stringify(parsed);
                    jsonOutput.textContent = minified;
                    jsonOutput.className = 'json-editor syntax-valid';
                    jsonInput.className = 'json-editor syntax-valid';
                    updateStatistics(parsed);
                    generateTreeView(parsed);
                    hideValidationResult();
                } catch (error) {
                    showValidationError(error.message);
                    jsonInput.className = 'json-editor syntax-error';
                }
            });

            // Validate JSON
            validateBtn.addEventListener('click', function() {
                const input = jsonInput.textContent.trim();
                if (!input) {
                    MultiTools.showNotification('Please enter JSON data', 'warning');
                    return;
                }

                try {
                    JSON.parse(input);
                    showValidationSuccess('JSON is valid!');
                    jsonInput.className = 'json-editor syntax-valid';
                } catch (error) {
                    showValidationError(error.message);
                    jsonInput.className = 'json-editor syntax-error';
                }
            });

            // Clear button
            clearBtn.addEventListener('click', function() {
                jsonInput.textContent = '';
                jsonOutput.textContent = '';
                jsonInput.className = 'json-editor';
                jsonOutput.className = 'json-editor';
                hideValidationResult();
                resetStatistics();
                jsonTree.innerHTML = `
                    <div class="text-center text-muted">
                        <i class="fas fa-tree fa-3x mb-3"></i>
                        <p>Format JSON to view tree structure</p>
                    </div>
                `;
            });

            // Copy button
            copyBtn.addEventListener('click', function() {
                const output = jsonOutput.textContent;
                if (output) {
                    navigator.clipboard.writeText(output).then(() => {
                        MultiTools.showNotification('Formatted JSON copied to clipboard!', 'success');
                    }).catch(() => {
                        MultiTools.showNotification('Failed to copy JSON', 'error');
                    });
                } else {
                    MultiTools.showNotification('No formatted JSON to copy', 'warning');
                }
            });

            // Download button
            downloadBtn.addEventListener('click', function() {
                const output = jsonOutput.textContent;
                if (output) {
                    const blob = new Blob([output], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'formatted.json';
                    a.click();
                    URL.revokeObjectURL(url);
                } else {
                    MultiTools.showNotification('No formatted JSON to download', 'warning');
                }
            });

            // Auto-format on paste
            jsonInput.addEventListener('paste', function() {
                setTimeout(() => {
                    formatBtn.click();
                }, 100);
            });

            function showValidationError(message) {
                validationResult.className = 'alert alert-danger';
                validationResult.innerHTML = `<i class="fas fa-exclamation-triangle me-2"></i>${message}`;
                validationResult.classList.remove('d-none');
            }

            function showValidationSuccess(message) {
                validationResult.className = 'alert alert-success';
                validationResult.innerHTML = `<i class="fas fa-check-circle me-2"></i>${message}`;
                validationResult.classList.remove('d-none');
            }

            function hideValidationResult() {
                validationResult.classList.add('d-none');
            }

            function updateStatistics(data) {
                let objects = 0;
                let arrays = 0;
                let properties = 0;

                function countItems(obj) {
                    if (Array.isArray(obj)) {
                        arrays++;
                        obj.forEach(item => countItems(item));
                    } else if (typeof obj === 'object' && obj !== null) {
                        objects++;
                        properties += Object.keys(obj).length;
                        Object.values(obj).forEach(value => countItems(value));
                    }
                }

                countItems(data);
                objectCount.textContent = objects;
                arrayCount.textContent = arrays;
                propertyCount.textContent = properties;
            }

            function resetStatistics() {
                objectCount.textContent = '0';
                arrayCount.textContent = '0';
                propertyCount.textContent = '0';
            }

            function generateTreeView(data) {
                function createTreeItem(key, value, level = 0) {
                    const indent = '  '.repeat(level);
                    const type = Array.isArray(value) ? 'array' : typeof value;
                    const icon = type === 'object' ? 'fas fa-folder' : 
                                type === 'array' ? 'fas fa-list' : 
                                type === 'string' ? 'fas fa-quote-left' : 
                                type === 'number' ? 'fas fa-hashtag' : 
                                type === 'boolean' ? 'fas fa-toggle-on' : 'fas fa-question';
                    
                    let content = `${indent}<i class="${icon} me-2"></i>`;
                    if (key !== null) {
                        content += `<strong>${key}:</strong> `;
                    }
                    
                    if (type === 'object' && value !== null) {
                        content += `{${Object.keys(value).length} properties}`;
                        const children = Object.entries(value).map(([k, v]) => createTreeItem(k, v, level + 1)).join('');
                        return `${content}\n${children}`;
                    } else if (type === 'array') {
                        content += `[${value.length} items]`;
                        const children = value.map((item, index) => createTreeItem(index, item, level + 1)).join('');
                        return `${content}\n${children}`;
                    } else {
                        const displayValue = type === 'string' ? `"${value}"` : value;
                        return `${content}${displayValue}`;
                    }
                }

                const treeContent = createTreeItem(null, data);
                jsonTree.innerHTML = `<pre class="mb-0">${treeContent}</pre>`;
            }

            // Sample JSON functions
            window.loadSample = function(type) {
                const samples = {
                    user: `{
  "id": 1,
  "name": "John Doe",
  "email": "john@example.com",
  "age": 30,
  "active": true,
  "address": {
    "street": "123 Main St",
    "city": "New York",
    "zip": "10001"
  },
  "hobbies": ["reading", "swimming", "coding"]
}`,
                    array: `[
  {
    "id": 1,
    "name": "Product 1",
    "price": 29.99,
    "category": "Electronics"
  },
  {
    "id": 2,
    "name": "Product 2",
    "price": 19.99,
    "category": "Books"
  },
  {
    "id": 3,
    "name": "Product 3",
    "price": 39.99,
    "category": "Clothing"
  }
]`,
                    nested: `{
  "company": {
    "name": "Tech Corp",
    "founded": 2020,
    "departments": {
      "engineering": {
        "head": "Alice Smith",
        "employees": 25,
        "projects": ["Web App", "Mobile App", "API"]
      },
      "marketing": {
        "head": "Bob Johnson",
        "employees": 10,
        "budget": 50000
      }
    }
  }
}`,
                    complex: `{
  "metadata": {
    "version": "1.0",
    "timestamp": "2024-01-15T10:30:00Z",
    "author": "System"
  },
  "data": {
    "users": [
      {
        "id": "u001",
        "profile": {
          "firstName": "Jane",
          "lastName": "Doe",
          "email": "jane@example.com",
          "preferences": {
            "theme": "dark",
            "notifications": true,
            "language": "en"
          }
        },
        "roles": ["user", "moderator"],
        "stats": {
          "posts": 150,
          "followers": 1200,
          "following": 800
        }
      }
    ],
    "settings": {
      "features": {
        "chat": true,
        "video": false,
        "analytics": true
      },
      "limits": {
        "fileSize": 10485760,
        "uploadCount": 100,
        "sessionTimeout": 3600
      }
    }
  }
}`
                };

                jsonInput.textContent = samples[type];
                formatBtn.click();
            };
        });
    </script>
</body>
</html> 